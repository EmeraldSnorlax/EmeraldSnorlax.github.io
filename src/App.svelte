<script lang="typescript">
	import { onMount } from "svelte";
	import { intro, location, motion } from "./stores";
	import Intro from "./components/Intro.svelte";
	import ToggleMotion from "./components/ToggleMotion.svelte";
	import Home from "./Home.svelte";
	import Projects from "./pages/Projects.svelte";
	import Pgp from "./pages/PGP.svelte";
	import Accounts from "./pages/Accounts.svelte";
	import About from "./pages/About.svelte";
	window.onhashchange = () => {
		switch (window.location.hash) {
			case "#home":
			case "#about":
			case "#projects":
			case "#accounts":
			case "#pgp":
				$location = window.location.hash.substring(1);
				break;
		}
	};

	onMount(() => {
		setTimeout(() => ($intro = true), 2000);
		if (!window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
			$motion = "";
		}
		$location = window.location.hash.substring(1);
	});
</script>

<main class={$motion} data-testid="main">
	{#if !$intro}
		<Intro />
	{:else if $location === "projects"}
		<Projects />
	{:else if $location === "pgp"}
		<Pgp />
	{:else if $location === "accounts"}
		<Accounts />
	{:else if $location === "about"}
		<About />
	{:else}
		<Home />
	{/if}
	<ToggleMotion />
</main>

<style>
	main {
		position: relative;
		z-index: 1;
		overflow: hidden;
		width: 100%;
		height: 100%;
	}
	main:before,
	main:after {
		content: "";
		z-index: -1;
		position: absolute;
		left: -50%;
		top: -50%;
		right: -50%;
		bottom: -50%;
		background: transparent repeat;
		background-size: 256px 1024px;
		opacity: 0.12;
		transform: rotate(10deg);
		animation: rainfall linear infinite 4s;
		background-image: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9 Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVt ZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5v cmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIv MjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5v cmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2 ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3Jn ZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0 cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgd2lk dGg9IjY0IgogICBoZWlnaHQ9IjI1NiIKICAgdmlld0JveD0iMCAwIDE2LjkzMzMz MyA2Ny43MzMzMzUiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzgiCiAgIGlu a3NjYXBlOnZlcnNpb249IjEuMC4yIChlODZjODcwODc5LCAyMDIxLTAxLTE1LCBj dXN0b20pIgogICBzb2RpcG9kaTpkb2NuYW1lPSJyYWluZHJvcHMuc3ZnIj4KICA8 ZGVmcwogICAgIGlkPSJkZWZzMiIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAg ICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjNTY1NjU2IgogICAgIGJvcmRl cmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBp bmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93 PSIyIgogICAgIGlua3NjYXBlOnpvb209IjMuOTU5Nzk4IgogICAgIGlua3NjYXBl OmN4PSI0My42NDg1NTciCiAgICAgaW5rc2NhcGU6Y3k9IjY2LjcwMzAzIgogICAg IGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJy ZW50LWxheWVyPSJsYXllcjEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtcm90YXRp b249IjAiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIHVuaXRzPSJweCIKICAg ICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSJmYWxzZSIKICAgICBpbmtzY2Fw ZTp3aW5kb3ctd2lkdGg9IjExNDciCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdo dD0iMTAyOCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMTIiCiAgICAgaW5rc2Nh cGU6d2luZG93LXk9IjM2IgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9 IjAiIC8+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNSI+CiAgICA8cmRm OlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAg ICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAg IDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5v cmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgICA8ZGM6dGl0bGU+ PC9kYzp0aXRsZT4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwv bWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAg ICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgog ICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiNmZmZmZmY7 c3Ryb2tlLXdpZHRoOjAuMjY0NTgzMzM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ry b2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjE7c3Ryb2tlLW1pdGVy bGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmUiCiAgICAgICBkPSJNIDAuNjQ1 MTQyMTMsMC44Mjc3MzUyNyBWIDQuOTU5NDE1NiIKICAgICAgIGlkPSJwYXRoODMz IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiNm ZmZmZmY7c3Ryb2tlLXdpZHRoOjAuMjY0NTgzMzM7c3Ryb2tlLWxpbmVjYXA6cm91 bmQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjE7c3Ryb2tl LW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmUiCiAgICAgICBkPSJN IDQuMTA5NDE2OCw1LjE0OTk5OTQgViA3Ljg0MTQ2MzUiCiAgICAgICBpZD0icGF0 aDgzNSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9r ZTojZmZmZmZmO3N0cm9rZS13aWR0aDowLjI2NDU4MzMzO3N0cm9rZS1saW5lY2Fw OnJvdW5kO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxO3N0 cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lIgogICAgICAg ZD0iTSA4LjUxMjM3NiwwLjgxMDY3NDA5IFYgNC4wNzUzMzgxIgogICAgICAgaWQ9 InBhdGg4NDUiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtz dHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6MC4yNjQ1ODMzMztzdHJva2UtbGlu ZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6 MTtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAg ICAgIGQ9Ik0gNS45MjIwMzA4LDkuMDMyODE5OCBWIDExLjkwNzk4OSIKICAgICAg IGlkPSJwYXRoODQ3IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5v bmU7c3Ryb2tlOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjAuMjY0NTgzMzM7c3Ryb2tl LWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFj aXR5OjE7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmUi CiAgICAgICBkPSJNIDE0LjkzNDg4NiwxLjA3NTM0ODQgViAxMC43NzQ1ODkiCiAg ICAgICBpZD0icGF0aDg0OSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmls bDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDowLjI2NDU4MzMzO3N0 cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Ut b3BhY2l0eToxO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpu b25lIgogICAgICAgZD0ibSA2LjA2NzI0ODUsMTYuMTcyMzI2IHYgMS43OTgxMjUi CiAgICAgICBpZD0icGF0aDg1MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0i ZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDowLjI2NDU4MzMz O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJv a2Utb3BhY2l0eToxO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJh eTpub25lIgogICAgICAgZD0ibSA5LjY0MTQ5MzksMTIuOTY5NzU3IHYgNS43MTUx MzQiCiAgICAgICBpZD0icGF0aDg1NSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHls ZT0iZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDowLjI2NDU4 MzMzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjptaXRlcjtz dHJva2Utb3BhY2l0eToxO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hh cnJheTpub25lIgogICAgICAgZD0ibSAxNC45NTY4MTIsMjEuODI2NzU1IHYgNi44 NDA2IgogICAgICAgaWQ9InBhdGg4NjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5 bGU9ImZpbGw6bm9uZTtzdHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6MC4yNjQ1 ODMzMztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46bWl0ZXI7 c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNo YXJyYXk6bm9uZSIKICAgICAgIGQ9Im0gMTMuMTAwOTI1LDE1Ljg5NjMwNSB2IDgu MzExNjYyIgogICAgICAgaWQ9InBhdGg4NjMiIC8+CiAgICA8cGF0aAogICAgICAg c3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6MC4y NjQ1ODMzMztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46bWl0 ZXI7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1k YXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Im0gMS4xMjEyOTc2LDMwLjY5MDA4NSB2 IDMuMDQwNDc5IgogICAgICAgaWQ9InBhdGg4NzMiIC8+CiAgICA8cGF0aAogICAg ICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6 MC4yNjQ1ODMzMztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46 bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9r ZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Im0gNS4yMDAxNDAxLDI0LjY5Mjcw MSB2IDMuNDIwMDA2IgogICAgICAgaWQ9InBhdGg4NzciIC8+CiAgICA8cGF0aAog ICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2ZmZmZmZjtzdHJva2Utd2lk dGg6MC4yNjQ1ODMzMztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpv aW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0 cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Im0gNy4zNzY5NTA0LDI4LjY0 NDYwNCB2IDMuMjIyNzI4IgogICAgICAgaWQ9InBhdGg4ODMiIC8+CiAgICA8cGF0 aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2ZmZmZmZjtzdHJva2Ut d2lkdGg6MC4yNjQ1ODMzMztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGlu ZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbWl0ZXJsaW1pdDo0 O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Im0gMTMuMjM2NjUyLDMy LjMyMDc5MSB2IDIuNjI1OTQ1IgogICAgICAgaWQ9InBhdGg4ODUiIC8+CiAgICA8 cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2ZmZmZmZjtzdHJv a2Utd2lkdGg6MC4yNjQ1ODMzMztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2Ut bGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbWl0ZXJsaW1p dDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Im0gMi45ODY0NDAx LDM3LjkyNTU4MiB2IDIuMTA5Mjg0IgogICAgICAgaWQ9InBhdGg4ODkiIC8+CiAg ICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2ZmZmZmZjtz dHJva2Utd2lkdGg6MC4yNjQ1ODMzMztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJv a2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbWl0ZXJs aW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Im0gMTAuNTMw MTY2LDM3LjYwMzU3OCB2IDQuMTcxMTQ1IgogICAgICAgaWQ9InBhdGg4OTEiIC8+ CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2ZmZmZm ZjtzdHJva2Utd2lkdGg6MC4yNjQ1ODMzMztzdHJva2UtbGluZWNhcDpyb3VuZDtz dHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbWl0 ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Ik0gNS4z MDAzMjkyLDM3Ljc5MDAxIFYgNDkuNDk1ODA0IgogICAgICAgaWQ9InBhdGg4OTci IC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2Zm ZmZmZjtzdHJva2Utd2lkdGg6MC4yNjQ1ODMzMztzdHJva2UtbGluZWNhcDpyb3Vu ZDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2Ut bWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Ik0g OC40OTE0MjkyLDQ1LjIzMDAwNCBWIDUxLjk4ODAxIgogICAgICAgaWQ9InBhdGg5 MDMiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6 I2ZmZmZmZjtzdHJva2Utd2lkdGg6MC4yNjQ1ODMzMztzdHJva2UtbGluZWNhcDpy b3VuZDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MTtzdHJv a2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9 Im0gMy4xODYyMzk3LDUyLjEyMDQ2MyB2IDkuNTY0Nzg4IgogICAgICAgaWQ9InBh dGg5MDciIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJv a2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6MC4yNjQ1ODMzMztzdHJva2UtbGluZWNh cDpyb3VuZDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MTtz dHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAg IGQ9Im0gNy44NzMxMTc1LDU1Ljg0NDI0NiB2IDYuMDM3NzI2IgogICAgICAgaWQ9 InBhdGg5MDkiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtz dHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6MC4yNjQ1ODMzMztzdHJva2UtbGlu ZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6 MTtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAg ICAgIGQ9Im0gMTUuNjIzNjc3LDUyLjM3NjQ5IHYgOS41ODQyIgogICAgICAgaWQ9 InBhdGg5MTUiIC8+CiAgPC9nPgo8L3N2Zz4K");
	}

	main:after {
		transform: translateX(4em) rotate(10deg) translateY(4em);
		animation-duration: 5s !important;
	}
	@keyframes rainfall {
		from {
			background-position: 64px 64px;
		}
		to {
			background-position: 64px 1088px;
		}
	}
	main.safe:before,
	main.safe:after {
		background-image: none;
	}
</style>
